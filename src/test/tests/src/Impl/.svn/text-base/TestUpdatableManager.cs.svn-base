using System;
using System.Collections.Generic;
using Testable;

namespace Tests {
    /*
     * keeps track of all our game objects for the scope of a test, so they can all be updated.
     */
    public class TestUpdatableManager {
        public void step(int numUpdates) {
            foreach (BaseGameObject o in toAdd) {
                objects.Add(o);
            }
            toAdd.Clear();
            for (int t = 0; t < numUpdates; t++) {
                foreach (BaseGameObject obj in objects) {
                    obj.Update();
                }
            }
        }

        public int objectCount() {
            return objects.Count;
        }

        private HashSet<BaseGameObject> objects = new HashSet<BaseGameObject>();
        private HashSet<BaseGameObject> toAdd = new HashSet<BaseGameObject>();
        public void RegisterGameobject(BaseGameObject obj) {
            if (objects.Contains(obj) || toAdd.Contains(obj)) {
                throw new ArgumentException("Duplicate game object");
            }
            toAdd.Add(obj);
        }
    }
}

